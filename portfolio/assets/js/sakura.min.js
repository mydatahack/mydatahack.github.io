!function(r){for(var a=0,t=["webkit","o","ms","moz",""],o=t.length,n=0;n<o&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];function s(n){n=(n=n instanceof jQuery?n[0]:n).getBoundingClientRect();return 0<=n.top&&0<=n.left&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}function d(n){return n[Math.floor(Math.random()*n.length)]}function l(n,i){return Math.floor(Math.random()*(i-n+1))+n}window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var i=(new Date).getTime(),e=Math.max(0,16-(i-a)),t=window.setTimeout(function(){n(i+e)},e);return a=i+e,t}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)}),r.fn.prefixedEvent=function(n,i){for(var e=0;e<o;++e)t[e]||(n=n.toLowerCase()),el=this instanceof jQuery?this[0]:this,el.addEventListener(t[e]+n,i,!1);return this},r.fn.sakura=function(n,a){var o,m=""==this.selector?r("body"):this,a=r.extend({},{blowAnimations:["blow-soft-left","blow-medium-left","blow-soft-right","blow-medium-right"],className:"sakura",fallSpeed:1,maxSize:14,minSize:10,newOn:300,swayAnimations:["sway-0","sway-1","sway-2","sway-3","sway-4","sway-5","sway-6","sway-7","sway-8"]},a);void 0===n||"start"===n?(m.css({"overflow-x":"hidden"}),o=function(){m.data("sakura-anim-id")&&setTimeout(function(){requestAnimationFrame(o)},a.newOn);var n=d(a.blowAnimations),i=d(a.swayAnimations),e=(.007*document.documentElement.clientHeight+Math.round(5*Math.random()))*a.fallSpeed,t="fall "+e+"s linear 0s 1, "+n+" "+((30<e?e:30)-20+l(0,20))+"s linear 0s infinite, "+i+" "+l(2,4)+"s linear 0s infinite",n=r('<div class="'+a.className+'" />'),e=l(a.minSize,a.maxSize),i=e-Math.floor(l(0,a.minSize)/3);n.prefixedEvent("AnimationEnd",function(){s(this)||r(this).remove()}).prefixedEvent("AnimationIteration",function(n){-1==r.inArray(n.animationName,a.blowAnimations)&&-1==r.inArray(n.animationName,a.swayAnimations)||s(this)||r(this).remove()}).css({"-webkit-animation":t,animation:t,"border-radius":l(a.maxSize,a.maxSize+Math.floor(10*Math.random()))+"px "+l(1,Math.floor(i/4))+"px",height:e+"px",left:Math.random()*document.documentElement.clientWidth-100+"px","margin-top":-(Math.floor(20*Math.random())+15)+"px",width:i+"px"}),m.append(n)},m.data("sakura-anim-id",requestAnimationFrame(o))):"stop"===n&&((n=m.data("sakura-anim-id"))&&(cancelAnimationFrame(n),m.data("sakura-anim-id",null)),setTimeout(function(){r("."+a.className).remove()},a.newOn+50))}}(jQuery);